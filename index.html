<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        ul, li {
            list-style: none;
        }

        .container {
            width: 100%;
            height: 100vh;
            /*background-color: #cccccc;*/
            display: flex;
            overflow: scroll;
        }

        .name_info_wrapper {
            flex: 1;
            overflow: scroll;
        }

        .name_info_wrapper {
            box-sizing: border-box;
        }

        .name_info_item h4, .name_info_item li {
            padding-left: 15px;
        }

        .name_info_item h4 {
            border-bottom: 1px solid #cccccc;
            background-color: lightslategray;
            height: 36px;
            line-height: 36px;
        }

        .name_info_item li {
            border-bottom: 1px solid lightcoral;
            height: 36px;
            line-height: 36px;
        }

        /*索引样式*/
        .name_index_wrapper {
            width: 5vw;
            text-align: center;
        }

        .name_index_wrapper ul {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 20px 0;
            box-sizing: border-box;
        }

        .name_index_wrapper li {
            flex: 1;
        }

        /*Toast样式*/
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            text-align: center;
            line-height: 40px;
            background-color: #000000;
            border-radius: 5px;
            opacity: 0.6;
            color: #fff;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="name_info_wrapper">
        <div class="name_info_item">
            <h4>A</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>B</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>C</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>D</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>E</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>F</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>G</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>H</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>I</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>J</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>K</h4>
            <ul>
                <li>A1</li>
                <li>A2</li>
                <li>A3</li>
                <li>A4</li>
                <li>A5</li>
                <li>A6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>L</h4>
            <ul>
                <li>L1</li>
                <li>L2</li>
                <li>L3</li>
                <li>L4</li>
                <li>L5</li>
                <li>L6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>M</h4>
            <ul>
                <li>M1</li>
                <li>M2</li>
                <li>M3</li>
                <li>M4</li>
                <li>M5</li>
                <li>M6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>N</h4>
            <ul>
                <li>N1</li>
                <li>N2</li>
                <li>N3</li>
                <li>N4</li>
                <li>N5</li>
                <li>N6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>O</h4>
            <ul>
                <li>O1</li>
                <li>O2</li>
                <li>O3</li>
                <li>O4</li>
                <li>O5</li>
                <li>O6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>P</h4>
            <ul>
                <li>P1</li>
                <li>P2</li>
                <li>P3</li>
                <li>P4</li>
                <li>P5</li>
                <li>P6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>Q</h4>
            <ul>
                <li>Q1</li>
                <li>Q2</li>
                <li>Q3</li>
                <li>Q4</li>
                <li>Q5</li>
                <li>Q6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>R</h4>
            <ul>
                <li>R1</li>
                <li>R2</li>
                <li>R3</li>
                <li>R4</li>
                <li>R5</li>
                <li>R6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>S</h4>
            <ul>
                <li>S1</li>
                <li>S2</li>
                <li>S3</li>
                <li>S4</li>
                <li>S5</li>
                <li>S6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>T</h4>
            <ul>
                <li>T1</li>
                <li>T2</li>
                <li>T3</li>
                <li>T4</li>
                <li>T5</li>
                <li>T6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>U</h4>
            <ul>
                <li>U1</li>
                <li>U2</li>
                <li>U3</li>
                <li>U4</li>
                <li>U5</li>
                <li>U6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>V</h4>
            <ul>
                <li>V1</li>
                <li>V2</li>
                <li>V3</li>
                <li>V4</li>
                <li>V5</li>
                <li>V6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>W</h4>
            <ul>
                <li>W1</li>
                <li>W2</li>
                <li>W3</li>
                <li>W4</li>
                <li>W5</li>
                <li>W6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>X</h4>
            <ul>
                <li>X1</li>
                <li>X2</li>
                <li>X3</li>
                <li>X4</li>
                <li>X5</li>
                <li>X6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>Y</h4>
            <ul>
                <li>Y1</li>
                <li>Y2</li>
                <li>Y3</li>
                <li>Y4</li>
                <li>Y5</li>
                <li>Y6</li>
            </ul>
        </div>
        <div class="name_info_item">
            <h4>Z</h4>
            <ul>
                <li>Z1</li>
                <li>Z2</li>
                <li>Z3</li>
                <li>Z4</li>
                <li>Z5</li>
                <li>Z6</li>
            </ul>
        </div>
    </div>
    <div class="name_index_wrapper">
        <ul>
            <li>A</li>
            <li>B</li>
            <li>C</li>
            <li>D</li>
            <li>E</li>
            <li>F</li>
            <li>G</li>
            <li>H</li>
            <li>I</li>
            <li>J</li>
            <li>K</li>
            <li>L</li>
            <li>M</li>
            <li>N</li>
            <li>O</li>
            <li>P</li>
            <li>Q</li>
            <li>R</li>
            <li>S</li>
            <li>T</li>
            <li>U</li>
            <li>V</li>
            <li>W</li>
            <li>X</li>
            <li>Y</li>
            <li>Z</li>
        </ul>
    </div>
</div>
<script>
    const name_index = document.querySelectorAll('.name_index_wrapper li');
    const name_item = document.querySelectorAll('.name_info_item h4');
    const name_info_wrapper = document.querySelector('.name_info_wrapper');
    let timer = '';
    let Cache = {};

    function scroll(item) {
        const toast = document.querySelector('.toast');
        if (toast) {
            document.body.removeChild(toast);
            clearTimeout(timer);
        }
        if (!getCurrentNameWrapper(item.innerHTML)) {
            return;
        }
        if (!Cache[item.innerHTML.toString()]) {
            const top = getCurrentNameWrapper(item.innerHTML);
            Cache[item.innerHTML.toString()] = top;
        }
        if (top === 0) {
            return;
        }
        name_info_wrapper.scrollTop = Cache[item.innerHTML.toString()];
        Toast(item.innerHTML);
    }

    function getCurrentNameWrapper(index) {
        const CurrentNameWrapper = Array.from(name_item).filter(item => item.innerHTML === index);
        return CurrentNameWrapper.length > 0 ? CurrentNameWrapper[0].offsetTop : false;

    }

    function Toast(index) {
        const div = document.createElement('div');
        div.innerHTML = index;
        div.setAttribute('class', 'toast');
        document.body.appendChild(div);
        timer = setTimeout(() => {
            document.body.removeChild(div);
        }, 1000);
    }

    const indexWrapper = document.querySelector('.name_index_wrapper');
    (function () {
        let flag = true;
        let current = '';
        let startTime = '';
        let clientX, clientY;
        indexWrapper.ontouchstart = (e) => {
            startTime = Date.now();
            let {clientX, clientY} = e.touches[0];
            const dom = document.elementFromPoint(clientX, clientY);
            scroll(dom);
        };
        indexWrapper.ontouchmove = function (e) {
            e.preventDefault();
            let {clientX, clientY} = e.touches[0];
            if (clientX < indexWrapper.getBoundingClientRect().left) {
                // 当触摸区域不在索引列表的时候,将clientX水平向右移动,这样可以保证正常获取index列表元素
                clientX = indexWrapper.getBoundingClientRect().left + 1;
            }
            const dom = document.elementFromPoint(clientX, clientY);
            if (dom && flag) {
                current = dom;
                scroll(dom);
                flag = false;
            }
            if (dom && dom.innerHTML !== current.innerHTML) {
                flag = true;
            }
        };
        indexWrapper.ontouchend = (e) => {
            let endTime = Date.now();
            if (endTime - startTime < 300) {
                return;
            }
        };
    })();


</script>
</body>
</html>